<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>BankNote — Docs</title>
  <meta name="description" content="BankNote (bNote) staking documentation" />

  <style>
    :root{
      --bg: #0a0e1a;
      --panel: rgba(16,22,38,0.92);
      --card: rgba(20,28,48,0.92);
      --muted: #9fb3d9;
      --text: #E8F1FF;
      --accent1: #7ee0ff;
      --accent2: #8c7eff;
      --outline: rgba(132,234,255,0.18);
      --outline-2: rgba(132,234,255,0.10);
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,0.45);
      --header-h: 64px;
      --toc-w: 280px;
    }

    /* Global */
    html { scroll-behavior: smooth; scroll-padding-top: 90px; }
    h1, h2, h3 { scroll-margin-top: 90px; }
    * { box-sizing: border-box; }
    body{
      margin:0; padding:0;
      color: var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(132,234,255,0.15), transparent),
        radial-gradient(1200px 600px at 80% 110%, rgba(255,132,234,0.12), transparent),
        var(--bg);
    }
    a{ color: var(--accent1); text-decoration: none; }
    a:hover{ text-decoration: underline; }
    code, pre{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }

    /* Header */
    .header{
      position: sticky; top:0; z-index: 5;
      height: var(--header-h);
      display:flex; align-items:center; justify-content:space-between;
      padding: 0 14px;
      background: linear-gradient(180deg, rgba(10,14,26,0.85), rgba(10,14,26,0.65));
      border-bottom: 1px solid var(--outline-2);
      backdrop-filter: blur(6px);
    }
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px;
    }
    .dot{ width:14px; height:14px; border-radius:999px;
      background: linear-gradient(135deg, #88f, #8ff);
      box-shadow: 0 0 18px rgba(136,136,255,.6);
    }
    .header-actions{ display:flex; gap:8px; align-items:center; }
    .btn{
      cursor:pointer; user-select:none;
      background: linear-gradient(135deg, rgba(136,136,255,0.25), rgba(136,255,255,0.25));
      border: 1px solid rgba(136,200,255,0.35);
      color: var(--text);
      border-radius: 12px; padding: 10px 14px; font-weight: 600;
    }
    .btn.secondary{
      background: rgba(132,234,255,0.12);
      border-color: var(--outline);
      color: #8ff;
    }

    /* Layout */
    .wrap{
      max-width: 1200px;
      margin: 18px auto;
      padding: 0 14px 28px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
    }
    @media (min-width: 1024px){
      .wrap{
        grid-template-columns: var(--toc-w) 1fr;
        align-items: start;
      }
    }

    /* Desktop TOC */
    .toc-desktop{
      display:none;
      position: sticky; top: calc(var(--header-h) + 12px);
      max-height: calc(100dvh - var(--header-h) - 24px);
      overflow:auto;
      background: var(--panel);
      border: 1px solid var(--outline-2);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      padding: 16px;
    }
    .toc-desktop h3{ margin: 0 0 8px; }
    .toc-list{
      list-style:none; margin:0; padding:0; display:grid; gap:10px;
    }
    .toc-list a{ display:block; padding:8px 10px; border-radius:10px; border:1px solid transparent; }
    .toc-list a:hover{ background: rgba(132,234,255,0.08); border-color: var(--outline-2); text-decoration:none; }
    @media (min-width:1024px){ .toc-desktop{ display:block; } }

    /* Main content */
    .card{
      background: var(--card);
      border: 1px solid var(--outline-2);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .doc h1{
      font-size: 26px; margin: 8px 0 12px;
    }
    .doc h2{
      font-size: 20px; margin: 20px 0 8px; border-bottom: 1px dashed var(--outline); padding-bottom: 6px;
    }
    .doc p{ color: var(--text); opacity: .92; line-height: 1.6; }
    .muted{ color: var(--muted); }
    .kpi{ display:inline-block; margin: 2px 8px 2px 0; padding: 4px 8px; border-radius: 10px;
      border: 1px solid var(--outline); background: rgba(132,234,255,0.08); color:#8ff; font-size: 12px; }

    /* Drawer (mobile Quick-Nav) */
    .quicknav-btn{ display:inline-flex; }
    @media (min-width:1024px){ .quicknav-btn{ display:none; } }

    .docs-drawer{ position: fixed; inset:0; display:none; z-index: 50; }
    .docs-drawer.open{ display:block; }
    .docs-drawer .mask{
      position:absolute; inset:0; background: rgba(0,0,0,.45); backdrop-filter: saturate(120%) blur(1px);
    }
    .docs-drawer .panel{
      position: absolute; right:0; top:0; bottom:0;
      width: min(94vw, 520px);
      background: var(--panel);
      border-left: 1px solid var(--outline-2);
      box-shadow: var(--shadow);
      padding: 16px; overflow:auto;
    }
    .docs-drawer .panel h3{ margin: 0 0 10px; }
    .drawer-list{ list-style:none; margin: 12px 0 0; padding:0; display:grid; gap: 12px; }
    .drawer-list a{
      display:block; padding: 10px 12px; border-radius: 12px; border: 1px solid transparent; color: var(--text);
    }
    .drawer-list a:hover{ background: rgba(132,234,255,0.08); border-color: var(--outline-2); text-decoration: none; }
    .close-x{
      appearance:none; border:1px solid var(--outline); background: rgba(132,234,255,0.08);
      color: var(--text); border-radius: 10px; padding: 6px 10px; cursor: pointer; font-weight:600;
    }

    /* Utility */
    .grid-2{ display:grid; gap:10px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }
    .note{ font-size: 12px; color: var(--muted); }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; }
    .no-scroll{ overflow:hidden; }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="brand">
      <div class="dot" aria-hidden="true"></div>
      <div>
        <div>BankNote — Docs</div>
        <div class="note">Staking reference</div>
      </div>
    </div>
    <div class="header-actions">
      <a class="btn secondary" href="/" title="Back to dApp">← Back to dApp</a>
      <button id="openDocsNav" class="btn quicknav-btn" type="button">Quick&nbsp;Nav</button>
    </div>
  </header>

  <!-- Drawer (mobile) -->
  <div id="docs-drawer" class="docs-drawer" data-drawer>
    <div class="mask" aria-hidden="true"></div>
    <aside class="panel" role="dialog" aria-label="Quick Nav">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
        <h3 style="margin:0;">Quick Nav</h3>
        <button id="closeDocsNav" class="close-x" type="button" aria-label="Close menu">✕</button>
      </div>
      <ul class="drawer-list">
        <li><a href="#quick-start">Quick Start</a></li>
        <li><a href="#key-params">Key Parameters</a></li>
        <li><a href="#how-staking-works">How Staking Works</a></li>
        <li><a href="#lpb-bpb">LPB &amp; BPB Bonuses</a></li>
        <li><a href="#share-rate">Share Rate (Up-Only)</a></li>
        <li><a href="#penalties">Early &amp; Late Penalties</a></li>
        <li><a href="#examples">Worked Examples</a></li>
        <li><a href="#using-dapp">Using the dApp</a></li>
        <li><a href="#analytics">Analytics Explained</a></li>
        <li><a href="#mobile-wallet">Mobile Wallet Tips</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#troubleshoot">Troubleshooting</a></li>
        <li><a href="#glossary">Glossary</a></li>
        <li><a href="#links">Contract &amp; Links</a></li>
        <li><a href="#disclaimer">Disclaimer</a></li>
      </ul>
    </aside>
  </div>

  <!-- Main -->
  <main class="wrap">
    <!-- Desktop TOC -->
    <aside class="toc-desktop">
      <h3>Quick Nav</h3>
      <ul class="toc-list">
        <li><a href="#quick-start">Quick Start</a></li>
        <li><a href="#key-params">Key Parameters</a></li>
        <li><a href="#how-staking-works">How Staking Works</a></li>
        <li><a href="#lpb-bpb">LPB &amp; BPB Bonuses</a></li>
        <li><a href="#share-rate">Share Rate (Up-Only)</a></li>
        <li><a href="#penalties">Early &amp; Late Penalties</a></li>
        <li><a href="#examples">Worked Examples</a></li>
        <li><a href="#using-dapp">Using the dApp</a></li>
        <li><a href="#analytics">Analytics Explained</a></li>
        <li><a href="#mobile-wallet">Mobile Wallet Tips</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#troubleshoot">Troubleshooting</a></li>
        <li><a href="#glossary">Glossary</a></li>
        <li><a href="#links">Contract &amp; Links</a></li>
        <li><a href="#disclaimer">Disclaimer</a></li>
      </ul>
    </aside>

    <!-- Document -->
    <article class="card doc">
      <h1 id="quick-start">Quick Start</h1>
      <div class="grid-2">
        <div>
          <p><span class="kpi">1</span> Connect wallet (PulseChain). If asked, approve adding/switching to <span class="mono">0x171</span>.</p>
          <p><span class="kpi">2</span> Enter amount and lock days → review <strong>Estimates</strong> (unlock date, LPB/BPB, est. shares).</p>
          <p><span class="kpi">3</span> Click <strong>Stake</strong>. Your tokens burn to shares for the lock duration.</p>
          <p><span class="kpi">4</span> On/after unlock, click <strong>End</strong> to mint back principal + yield (penalties may apply).</p>
        </div>
        <div>
          <p class="note">Tip: Ending exactly on the unlock day has no late penalty. Early/late windows apply linear penalties; see below.</p>
        </div>
      </div>

      <h2 id="key-params">Key Parameters</h2>
      <p>HEX-like defaults:</p>
      <ul>
        <li>APR: <strong>3.69%</strong> nominal</li>
        <li>Longer Pays Better (LPB): <strong>+20%/year</strong> up to 10 years (max +200%)</li>
        <li>Bigger Pays Better (BPB): up to <strong>+10%</strong> at a fixed cap</li>
        <li>Min/Max lock: <strong>1</strong> to <strong>5,555</strong> days</li>
        <li>Early/Late penalties: up to <strong>25%</strong> (linear)</li>
        <li>Share rate: <strong>up-only</strong> ratchet at stake end</li>
      </ul>

      <h2 id="how-staking-works">How Staking Works</h2>
      <p>When you stake, bNote burns and you receive <em>shares</em>. Yield accrues vs shares. Ending a stake mints tokens back based on principal, bonuses, and the current share rate.</p>

      <h2 id="lpb-bpb">LPB &amp; BPB Bonuses</h2>
      <ul>
        <li><strong>LPB</strong>: +20% per 365 days, capped at +200% (10y).</li>
        <li><strong>BPB</strong>: scales up to +10% at the fixed cap amount; proportionally less below the cap.</li>
      </ul>

      <h2 id="share-rate">Share Rate (Up-Only)</h2>
      <p>The share rate ratchets upward when a matured stake’s effective payout would otherwise allow more shares than originally bought. This protects earlier stakers and makes later shares more expensive.</p>

      <h2 id="penalties">Early &amp; Late Penalties</h2>
      <ul>
        <li><strong>Early</strong>: linear up to 25% at the start of the term, decreasing to 0% at unlock.</li>
        <li><strong>Late</strong>: linear from 0% at unlock, growing toward 25% the longer you wait.</li>
      </ul>
      <p class="note">Penalties shown in the app are guidance; on-chain results depend on exact block timestamps.</p>

      <h2 id="examples">Worked Examples</h2>
      <p>Examples in the app’s <em>Estimates</em> panel update live as you edit amount/days.</p>

      <h2 id="using-dapp">Using the dApp</h2>
      <ul>
        <li>Start a stake in <strong>Actions → Start a Stake</strong>.</li>
        <li>Manage live stakes in <strong>Your Stakes</strong>. End by index or via the table buttons.</li>
        <li>Export/Copy CSV from the table header.</li>
      </ul>

      <h2 id="analytics">Analytics Explained</h2>
      <p>Top KPIs show price (USD/PLS), wallet value, estimated market cap, staked amount %, APR, and share rate. Charts visualize unlocks, maturity buckets, and more.</p>

      <h2 id="mobile-wallet">Mobile Wallet Tips</h2>
      <ul>
        <li>Use an in-app browser (MetaMask, Rabby, Trust, Internet Money, etc.).</li>
        <li>If WalletConnect is used, approve the session and allow popups.</li>
        <li>On iOS, disable content blockers for smoother signing.</li>
      </ul>

      <h2 id="faq">FAQ</h2>
      <p><strong>Q:</strong> Why did shares get more expensive?<br/>
         <strong>A:</strong> The share rate increases to protect earlier stakers (up-only).</p>

      <h2 id="troubleshoot">Troubleshooting</h2>
      <ul>
        <li>Stuck connecting? Switch to PulseChain, then reconnect.</li>
        <li>Mobile WC not pairing? Clear previous sessions in the wallet and re-scan.</li>
        <li>UI looks odd? Hard refresh (<span class="mono">Ctrl/Cmd+Shift+R</span>).</li>
      </ul>

      <h2 id="glossary">Glossary</h2>
      <p><strong>Shares</strong>: internal accounting units determining yield. <strong>Share rate</strong>: the cost of shares, increases over time.</p>

      <h2 id="links">Contract &amp; Links</h2>
      <p>bNote contract address: <span class="mono">0x473EB99177965277275B3e83bCE3d4884473878D</span></p>

      <h2 id="disclaimer">Disclaimer</h2>
      <p class="note">Nothing here is financial advice. Use at your own risk.</p>
    </article>
  </main>

  <!-- Drawer behavior -->
  <script>
    (function () {
      const drawer = document.querySelector('[data-drawer], #docs-drawer, .docs-drawer, #quickNav');
      if (!drawer) return;

      let mask = drawer.querySelector('.mask');
      if (!mask) {
        mask = document.createElement('div');
        mask.className = 'mask';
        drawer.appendChild(mask);
      }

      const openers = document.querySelectorAll('[data-open-drawer], #openDocsNav, #openNav, .open-docs-nav');
      const closers = drawer.querySelectorAll('[data-close-drawer], #closeDocsNav, #closeNav, .close-docs-nav');

      function openDrawer(e) { if (e) e.preventDefault(); drawer.classList.add('open'); document.body.classList.add('no-scroll'); }
      function closeDrawer() { drawer.classList.remove('open'); document.body.classList.remove('no-scroll'); }

      openers.forEach(btn => btn.addEventListener('click', openDrawer));
      closers.forEach(btn => btn.addEventListener('click', closeDrawer));
      mask.addEventListener('click', closeDrawer);
      window.addEventListener('keydown', e => { if (e.key === 'Escape') closeDrawer(); });

      // Close after clicking any in-drawer anchor
      drawer.querySelectorAll('a[href^="#"]').forEach(a => {
        a.addEventListener('click', () => setTimeout(closeDrawer, 60));
      });

      // Also close on hash navigation (back/forward between anchors)
      window.addEventListener('hashchange', closeDrawer);
    })();
  </script>
</body>
</html>
